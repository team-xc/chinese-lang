<!doctype html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <title>ä¸­æ–‡ç¼–ç¨‹</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      button {
        position: relative;
        padding: 10px 40px;
        margin: 20px 10px 10px 0;
        float: left;
        border-radius: 3px;
        font-size: 20px;
        color: #ffffff;
        text-decoration: none;
        background-color: #2ecc71;
        border: none;
        border-bottom: 5px solid #27ae60;
        text-shadow: 0 -2px #27ae60;
        transition: all 0.1s;
        cursor: pointer;
      }

      button:hover,
      button:active {
        transform: translate(0px, 5px);
        border-bottom: 1px solid #2ecc71;
      }

      h1 {
        margin-bottom: 50px;
      }

      textarea {
        margin: 10px 0;
        padding: 10px;
        border: 1px black solid;
        border-radius: 10px;
        resize: none;
        background: rgba(255, 255, 255, 0.25);
      }

      textarea:focus-visible {
        outline: 1px solid black;
      }

      .box {
        position: absolute;
        top: 0;
        width: 100vw;
        min-height: 100vh;
        padding: 100px 0;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        align-items: center;
        flex-direction: column;
        background-image: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
      }

      .info {
        display: flex;
        margin-top: 100px;
      }

      .info-label {
        display: flex;
        flex-direction: column;
      }
    </style>
  </head>
  <body>

    <div class="box">
      <h1>ä¸­æ–‡ç¼–ç¨‹</h1>
      <div class="info-label">
        <label for="code">Code:</label>
        <textarea id="code" cols="110" rows="25"></textarea>
      </div>
      <button onclick="è¿è¡Œ(document.querySelector('#code').value)">Runï¼</button>

      <div class="info">
        <div class="info-label">
          <label for="console">Console:</label>
          <textarea id="console" cols="50" rows="10"></textarea>
        </div>

        <div style="width: 30px;"></div>

        <div class="info-label">
          <label for="ast">AST:</label>
          <textarea id="ast" cols="50" rows="10"></textarea>
        </div>
      </div>
    </div>

    <script>
      document.querySelector('#code').value = '~ è¿™é‡Œä¸ä¼šè¢«æ‰§è¡Œ\n~ è¿™é‡Œä¸ä¼šè¢«æ‰§è¡Œ\n\næˆ‘æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ã€ŒğŸ”ã€ï¼Œç­‰äºâ€œå¤å¤â¤ï¸â€ã€‚\næˆ‘æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ã€ŒğŸ€ã€ï¼Œç­‰äºâ€œæ‰“ç¯®çƒâ€ã€‚\n\nå¼¹çª—ï¼šâ€œæˆ‘å«â€ã€ŒğŸ”ã€â€œï¼Œæˆ‘ä¼šâ€ã€ŒğŸ€ã€â€œã€‚â€ã€‚\nå¼¹çª—ï¼šã€ŒğŸ”ã€ã€‚\n\n\næˆ‘æœ‰ä¸€ä¸ªæ•´æ•°ã€Œæ°‘æ—ã€ï¼Œç­‰äºäº”åå…­ã€‚\næ§åˆ¶å°è¾“å‡ºï¼šæ°‘æ—â€œä¸ªæ°‘æ—â€ã€‚'

      function è¿è¡Œ(è„šæœ¬) {
        const è¾“å…¥æµ = è„šæœ¬ => {
          let ä½ç½® = 0, è¡Œ = 1, åˆ— = 0

          const ä¸‹ä¸ªå­—ç¬¦ = () => {
            const å­—ç¬¦ = è„šæœ¬.charAt(ä½ç½®++)
            if (å­—ç¬¦ === '\n') {
              è¡Œ++
              åˆ— = 0
            } else åˆ—++
            return å­—ç¬¦
          }

          const è§‚æµ‹ = () => è„šæœ¬.charAt(ä½ç½®)

          const ç»“æŸ = () => ä½ç½® >= è„šæœ¬.length

          const å¼‚å¸¸ = ä¿¡æ¯ => {
            throw new Error(`${ä¿¡æ¯} ${è¡Œ}:${åˆ—}`)
          }

          return {ä¸‹ä¸ªå­—ç¬¦, è§‚æµ‹, ç»“æŸ, å¼‚å¸¸}
        }

        const ä»¤ç‰Œæµ = è¾“å…¥æµ => {
          const å…³é”®è¯ = /(æˆ‘|æœ‰|ä¸€|ä¸ª)/i
          const ç±»å‹ = /(æ•´|æ•°|å­—|ç¬¦|ä¸²)/i
          const ç©ºç™½å­—ç¬¦ = /(ï¼Œ| |\t|\n)/i
          const æ•´æ•° = /[0-9ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åå£¹è´°åè‚†ä¼é™†æŸ’æŒç–æ‹¾]/i
          const å˜é‡ = /(?!æˆ‘|æœ‰|ä¸€|ä¸ª)[\u4e00-\u9fa5]/i
          const æ ‡ç‚¹ç¬¦å· = /(ã€‚|ï¼š|ã€Œ|ã€)/i
          const è¿ç®—ç¬¦ = /(ç­‰|äº)/i
          let å½“å‰ = null

          const æ˜¯å¦ = {
            å…³é”®è¯: å­—ç¬¦ => å…³é”®è¯.test(å­—ç¬¦),
            ç±»å‹: å­—ç¬¦ => ç±»å‹.test(å­—ç¬¦),
            ç©ºç™½å­—ç¬¦: å­—ç¬¦ => ç©ºç™½å­—ç¬¦.test(å­—ç¬¦),
            æ•´æ•°: å­—ç¬¦ => æ•´æ•°.test(å­—ç¬¦),
            å˜é‡: å­—ç¬¦ => å˜é‡.test(å­—ç¬¦),
            æ ‡ç‚¹ç¬¦å·: å­—ç¬¦ => æ ‡ç‚¹ç¬¦å·.test(å­—ç¬¦),
            è¿ç®—ç¬¦: å­—ç¬¦ => è¿ç®—ç¬¦.test(å­—ç¬¦)
          }

          const è·³è¿‡ = {
            æ‰¹æ³¨: () => {
              è¯»å–.æœŸé—´(å­—ç¬¦ => å­—ç¬¦ !== '\n')
              è¾“å…¥æµ.ä¸‹ä¸ªå­—ç¬¦()
            }
          }

          const ä»¤ç‰Œ = {
            å…³é”®è¯: å€¼ => ({ç±»å‹: 'å…³é”®è¯', å€¼}),
            å­—ç¬¦ä¸²: å€¼ => ({ç±»å‹: 'å­—ç¬¦ä¸²', å€¼}),
            æ•´æ•°: å€¼ => ({ç±»å‹: 'æ•´æ•°', å€¼}),
            ç±»å‹: å€¼ => ({ç±»å‹: 'ç±»å‹', å€¼}),
            å˜é‡: åç§° => ({ç±»å‹: 'å˜é‡', åç§°}),
            æ ‡ç‚¹ç¬¦å·: å€¼ => ({ç±»å‹: 'æ ‡ç‚¹ç¬¦å·', å€¼}),
            è¿ç®—ç¬¦: å€¼ => ({ç±»å‹: 'è¿ç®—ç¬¦', å€¼})
          }

          const è¯»å– = {
            ä¸‹ä¸ªä»¤ç‰Œ: () => {
              è¯»å–.æœŸé—´(æ˜¯å¦.ç©ºç™½å­—ç¬¦)
              if (è¾“å…¥æµ.ç»“æŸ()) return null
              const å­—ç¬¦ = è¾“å…¥æµ.è§‚æµ‹()

              switch (å­—ç¬¦) {
                case '~': {
                  è·³è¿‡.æ‰¹æ³¨()
                  return è¯»å–.ä¸‹ä¸ªä»¤ç‰Œ()
                }
                case 'â€œ': {
                  return è¯»å–.å­—ç¬¦ä¸²()
                }
                case 'ã€Œ': {
                  return è¯»å–.å¼•ç”¨å˜é‡()
                }
              }

              if (æ˜¯å¦.è¿ç®—ç¬¦(å­—ç¬¦)) return ä»¤ç‰Œ.è¿ç®—ç¬¦(è¯»å–.æœŸé—´(æ˜¯å¦.è¿ç®—ç¬¦))
              if (æ˜¯å¦.å…³é”®è¯(å­—ç¬¦)) return ä»¤ç‰Œ.å…³é”®è¯(è¯»å–.æœŸé—´(æ˜¯å¦.å…³é”®è¯))
              if (æ˜¯å¦.ç±»å‹(å­—ç¬¦)) return ä»¤ç‰Œ.ç±»å‹(è¯»å–.æœŸé—´(æ˜¯å¦.ç±»å‹))
              if (æ˜¯å¦.æ•´æ•°(å­—ç¬¦)) return è¯»å–.æ•´æ•°()
              if (æ˜¯å¦.å˜é‡(å­—ç¬¦)) return è¯»å–.å˜é‡()
              if (æ˜¯å¦.æ ‡ç‚¹ç¬¦å·(å­—ç¬¦)) return ä»¤ç‰Œ.æ ‡ç‚¹ç¬¦å·(è¾“å…¥æµ.ä¸‹ä¸ªå­—ç¬¦())

              è¾“å…¥æµ.å¼‚å¸¸(`æ„å¤–çš„ä»¤ç‰Œ ã€Œ${å­—ç¬¦}ã€`)
            },
            æœŸé—´: æ–­è¨€ => {
              let å­—ç¬¦ = ''
              while (!è¾“å…¥æµ.ç»“æŸ() && æ–­è¨€(è¾“å…¥æµ.è§‚æµ‹()))
                å­—ç¬¦ += è¾“å…¥æµ.ä¸‹ä¸ªå­—ç¬¦()
              return å­—ç¬¦
            },
            æ•æ‰: ç»“æŸå­—ç¬¦ => {
              let å·²æ•æ‰ = false, æ•æ‰å­—ç¬¦ = ''
              è¾“å…¥æµ.ä¸‹ä¸ªå­—ç¬¦()
              while (!è¾“å…¥æµ.ç»“æŸ()) {
                const å­—ç¬¦ = è¾“å…¥æµ.ä¸‹ä¸ªå­—ç¬¦()
                if (å·²æ•æ‰) {
                  æ•æ‰å­—ç¬¦ += å­—ç¬¦
                  å·²æ•æ‰ = false
                } else if (å­—ç¬¦ === '\\') {
                  å·²æ•æ‰ = true
                } else if (å­—ç¬¦ === ç»“æŸå­—ç¬¦) {
                  break
                } else {
                  æ•æ‰å­—ç¬¦ += å­—ç¬¦
                }
              }
              return æ•æ‰å­—ç¬¦
            },
            å¼•ç”¨å˜é‡: () => ä»¤ç‰Œ.å˜é‡(è¯»å–.æ•æ‰('ã€')),
            å˜é‡: () => ä»¤ç‰Œ.å˜é‡(è¯»å–.æœŸé—´(æ˜¯å¦.å˜é‡)),
            å­—ç¬¦ä¸²: () => ä»¤ç‰Œ.å­—ç¬¦ä¸²(è¯»å–.æ•æ‰('â€')),
            æ•´æ•°: () => ä»¤ç‰Œ.æ•´æ•°(è¯»å–.æœŸé—´(æ˜¯å¦.æ•´æ•°))
          }

          const è§‚æµ‹ = () => å½“å‰ || (å½“å‰ = è¯»å–.ä¸‹ä¸ªä»¤ç‰Œ())

          const ä¸‹ä¸ªä»¤ç‰Œ = () => {
            const ä»¤ç‰Œ = å½“å‰
            å½“å‰ = null
            return ä»¤ç‰Œ || è¯»å–.ä¸‹ä¸ªä»¤ç‰Œ()
          }

          const ç»“æŸ = () => è§‚æµ‹() == null

          return {ä¸‹ä¸ªä»¤ç‰Œ, è§‚æµ‹, ç»“æŸ, æ˜¯å¦åŒ¹é…: æ˜¯å¦, å¼‚å¸¸: è¾“å…¥æµ.å¼‚å¸¸}
        }

        const è§£æ = ä»¤ç‰Œæµ => {
          const ä»¤ç‰Œ = {
            ç¨‹åº: ç¨‹åºä½“ => ({
              'ç±»å‹': 'ç¨‹åº',
              'æè¿°': {
                'ç¨‹åºä½“': ç¨‹åºä½“
              }
            }),
            å£°æ˜å˜é‡: (åç§°, ç±»å‹, å€¼) => ({
              'ç±»å‹': 'å£°æ˜å˜é‡',
              'æè¿°': {
                'åç§°': åç§°,
                'ç±»å‹': ç±»å‹,
                'å€¼': å€¼
              }
            }),
            è°ƒç”¨è¡¨è¾¾å¼: (åç§°, å‚æ•°) => ({
              'ç±»å‹': 'è°ƒç”¨è¡¨è¾¾å¼',
              'æè¿°': {
                'è°ƒç”¨': åç§°,
                'å‚æ•°': å‚æ•°
              }
            }),
            è·å–å˜é‡: åç§° => ({
              'ç±»å‹': 'è·å–å˜é‡',
              'æè¿°': {
                'åç§°': åç§°
              }
            }),
            å­—ç¬¦ä¸²: å€¼ => ({
              'ç±»å‹': 'å­—ç¬¦ä¸²',
              'æè¿°': {
                'å€¼': å€¼
              }
            })
          }

          const æ˜¯å¦ = {
            æ ‡ç‚¹ç¬¦å·: å­—ç¬¦ => {
              const ä»¤ç‰Œ = ä»¤ç‰Œæµ.è§‚æµ‹()
              return ä»¤ç‰Œ && ä»¤ç‰Œ.ç±»å‹ === 'æ ‡ç‚¹ç¬¦å·' && (!å­—ç¬¦ || ä»¤ç‰Œ.å€¼ === å­—ç¬¦) && ä»¤ç‰Œ
            },
            ç±»å‹: å­—ç¬¦ => {
              const ä»¤ç‰Œ = ä»¤ç‰Œæµ.è§‚æµ‹()
              return ä»¤ç‰Œ && ä»¤ç‰Œ.ç±»å‹ === 'ç±»å‹' && (!å­—ç¬¦ || ä»¤ç‰Œ.å€¼ === å­—ç¬¦) && ä»¤ç‰Œ
            },
            å…³é”®è¯: å…³é”®è¯ => {
              const ä»¤ç‰Œ = ä»¤ç‰Œæµ.è§‚æµ‹()
              return ä»¤ç‰Œ && ä»¤ç‰Œ.ç±»å‹ === 'å…³é”®è¯' && (!å…³é”®è¯ || ä»¤ç‰Œ.å€¼ === å…³é”®è¯) && ä»¤ç‰Œ
            },
            è¿ç®—ç¬¦: è¿ç®—ç¬¦ => {
              const ä»¤ç‰Œ = ä»¤ç‰Œæµ.è§‚æµ‹()
              return ä»¤ç‰Œ && ä»¤ç‰Œ.ç±»å‹ === 'è¿ç®—ç¬¦' && (!è¿ç®—ç¬¦ || ä»¤ç‰Œ.å€¼ === è¿ç®—ç¬¦) && ä»¤ç‰Œ
            }
          }

          const è·³è¿‡ = {
            æ ‡ç‚¹ç¬¦å·: å­—ç¬¦ => {
              if (æ˜¯å¦.æ ‡ç‚¹ç¬¦å·(å­—ç¬¦)) ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
              else ä»¤ç‰Œæµ.å¼‚å¸¸(`æœŸæœ›æ ‡ç‚¹ç¬¦å· ã€Œ${å­—ç¬¦}ã€`)
            },
            ç±»å‹: å­—ç¬¦ => {
              if (æ˜¯å¦.ç±»å‹(å­—ç¬¦)) ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
              else ä»¤ç‰Œæµ.å¼‚å¸¸(`æœŸæœ›ç±»å‹ ã€Œ${å­—ç¬¦}ã€`)
            }
          }

          const æˆ–è®¸ = {
            è°ƒç”¨: è¡¨è¾¾å¼ => è¡¨è¾¾å¼(),
            åµŒå¥—: (å½“å‰èŠ‚ç‚¹, çˆ¶èŠ‚ç‚¹) => å½“å‰èŠ‚ç‚¹
          }

          const è¯­æ³•åˆ†æ = {
            é¡¶å±‚: () => {
              const è¯­æ³•æ ‘ = Array()
              while (!ä»¤ç‰Œæµ.ç»“æŸ()) {
                è¯­æ³•æ ‘.push(è¯­æ³•åˆ†æ.è¡¨è¾¾å¼())
              }
              return ä»¤ç‰Œ.ç¨‹åº(è¯­æ³•æ ‘)
            },
            è¡¨è¾¾å¼: () => æˆ–è®¸.è°ƒç”¨(() => æˆ–è®¸.åµŒå¥—(è¯­æ³•åˆ†æ.åŸå­(), 0)),
            åŸå­: () => æˆ–è®¸.è°ƒç”¨(() => {
              if (æ˜¯å¦.æ ‡ç‚¹ç¬¦å·('ã€‚')) ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()

              if (æ˜¯å¦.å…³é”®è¯('æˆ‘æœ‰ä¸€ä¸ª') && ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()) {
                const ç±»å‹ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
                const å˜é‡ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
                const è¿ç®—ç¬¦ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
                const ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()

                if (ç±»å‹ä»¤ç‰Œ.ç±»å‹ === 'ç±»å‹' &&
                  å˜é‡ä»¤ç‰Œ.ç±»å‹ === 'å˜é‡' &&
                  è¿ç®—ç¬¦ä»¤ç‰Œ.ç±»å‹ === 'è¿ç®—ç¬¦' &&
                  è¿ç®—ç¬¦ä»¤ç‰Œ.å€¼ === 'ç­‰äº' &&
                  (ä»¤ç‰Œ.ç±»å‹ === 'æ•´æ•°' || ä»¤ç‰Œ.ç±»å‹ === 'å­—ç¬¦ä¸²')
                ) return è¯­æ³•åˆ†æ.å£°æ˜å˜é‡(å˜é‡ä»¤ç‰Œ.åç§°, ç±»å‹ä»¤ç‰Œ.å€¼, ä»¤ç‰Œ.å€¼)
              }

              const ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
              if (ä»¤ç‰Œ.ç±»å‹ === 'å˜é‡') {
                const åç§° = ä»¤ç‰Œ.åç§°
                const å‚æ•° = Array()
                const æ ‡ç‚¹ç¬¦å·ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
                if (æ ‡ç‚¹ç¬¦å·ä»¤ç‰Œ.å€¼ === 'ï¼š') {
                  while (!æ˜¯å¦.æ ‡ç‚¹ç¬¦å·('ã€‚')) {
                    const ä»¤ç‰Œ = ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
                    if (ä»¤ç‰Œ === null) {
                      è·³è¿‡.æ ‡ç‚¹ç¬¦å·('ã€‚')
                      break
                    }
                    switch (ä»¤ç‰Œ.ç±»å‹) {
                      case 'å˜é‡':
                        å‚æ•°.push(è¯­æ³•åˆ†æ.è·å–å˜é‡(ä»¤ç‰Œ.åç§°))
                        break
                      case 'å­—ç¬¦ä¸²':
                        å‚æ•°.push(è¯­æ³•åˆ†æ.å­—ç¬¦ä¸²(ä»¤ç‰Œ.å€¼))
                        break
                      default:
                        è¯­æ³•åˆ†æ.æ„å¤–()
                    }
                  }
                  ä»¤ç‰Œæµ.ä¸‹ä¸ªä»¤ç‰Œ()
                  return è¯­æ³•åˆ†æ.è°ƒç”¨è¡¨è¾¾å¼(åç§°, å‚æ•°)
                }
              }

              è¯­æ³•åˆ†æ.æ„å¤–()
            }),
            è·å–å˜é‡: åç§° => ä»¤ç‰Œ.è·å–å˜é‡(åç§°),
            å­—ç¬¦ä¸²: å€¼ => ä»¤ç‰Œ.å­—ç¬¦ä¸²(å€¼),
            è°ƒç”¨è¡¨è¾¾å¼: (åç§°, å‚æ•°) => ä»¤ç‰Œ.è°ƒç”¨è¡¨è¾¾å¼(åç§°, å‚æ•°),
            å£°æ˜å˜é‡: (åç§°, ç±»å‹, å€¼) => {
              if ((ç±»å‹ === 'æ•´æ•°' && !ä»¤ç‰Œæµ.æ˜¯å¦åŒ¹é….æ•´æ•°(å€¼))) {
                ä»¤ç‰Œæµ.å¼‚å¸¸(`éœ€è¦æ•´æ•°ï¼Œä½†å¾—åˆ° ã€Œ${å€¼}ã€`)
              }
              if ((ç±»å‹ === 'å­—ç¬¦ä¸²' && ä»¤ç‰Œæµ.æ˜¯å¦åŒ¹é….æ•´æ•°(å€¼))) {
                ä»¤ç‰Œæµ.å¼‚å¸¸(`éœ€è¦å­—ç¬¦ä¸²ï¼Œä½†å¾—åˆ° ã€Œ${å€¼}ã€`)
              }
              return ä»¤ç‰Œ.å£°æ˜å˜é‡(åç§°, ç±»å‹, å€¼)
            },
            æ„å¤–: () => ä»¤ç‰Œæµ.å¼‚å¸¸(`æ„å¤–çš„ä»¤ç‰Œ ã€Œ${ä»¤ç‰Œæµ.è§‚æµ‹().å€¼ || ä»¤ç‰Œæµ.è§‚æµ‹().åç§° || ä»¤ç‰Œæµ.è§‚æµ‹().ç±»å‹}ã€`)
          }

          return è¯­æ³•åˆ†æ.é¡¶å±‚()
        }

        const æ‰§è¡Œ = (è¯­å¥, ç¯å¢ƒ) => {
          switch (è¯­å¥.ç±»å‹) {
            case 'ç¨‹åº':
              let è¿”å›å€¼ = false
              è¯­å¥.æè¿°.ç¨‹åºä½“.forEach(è¯­å¥ => {
                è¿”å›å€¼ = æ‰§è¡Œ(è¯­å¥, ç¯å¢ƒ)
              })
              return è¿”å›å€¼
            case 'å­—ç¬¦ä¸²':
              return è¯­å¥.æè¿°.å€¼
            case 'è·å–å˜é‡':
              return ç¯å¢ƒ.è·å–(è¯­å¥.æè¿°.åç§°)
            case 'å£°æ˜å˜é‡':
              return ç¯å¢ƒ.è®¾ç½®(è¯­å¥.æè¿°.åç§°, è¯­å¥.æè¿°.å€¼)
            case 'è°ƒç”¨è¡¨è¾¾å¼':
              if (typeof ç¯å¢ƒ.å˜é‡è¡¨[è¯­å¥.æè¿°.è°ƒç”¨] !== 'function') throw new Error(`ä¸æ˜¯ä¸€ä¸ªæ–¹æ³• ã€Œ${è¯­å¥.æè¿°.è°ƒç”¨}ã€`)
              let å‚æ•° = String()
              è¯­å¥.æè¿°.å‚æ•°.forEach(å‚æ•°è¡¨è¾¾å¼ => å‚æ•° += æ‰§è¡Œ(å‚æ•°è¡¨è¾¾å¼, ç¯å¢ƒ))
              return ç¯å¢ƒ.å˜é‡è¡¨[è¯­å¥.æè¿°.è°ƒç”¨].call(null, å‚æ•°)
            default:
              throw new Error(`æ— æ³•æ‰§è¡Œ ã€Œ${è¯­å¥.ç±»å‹}ã€`)
          }
        }

        function ç¯å¢ƒ() {
          this.å˜é‡è¡¨ = Object.create(null)
        }

        ç¯å¢ƒ.prototype = {
          è·å–: function (åç§°) {
            if (åç§° in this.å˜é‡è¡¨)
              return this.å˜é‡è¡¨[åç§°] || 'ç©º'
            throw new Error(`æœªå®šä¹‰å˜é‡ ã€Œ${åç§°}ã€`)
          },
          è®¾ç½®: function (åç§°, å€¼) {
            return this.å˜é‡è¡¨[åç§°] = å€¼
          }
        }

        const é»˜è®¤ç¯å¢ƒ = new ç¯å¢ƒ()

        const å†…ç½®æ–¹æ³• = {
          æ§åˆ¶å°è¾“å‡º: ä¿¡æ¯ => {
            document.querySelector('#console').value += `${ä¿¡æ¯}\n`
          },
          å¼¹çª—: ä¿¡æ¯ => {
            alert(ä¿¡æ¯ || 'ç©º')
          }
        }

        for (let æ–¹æ³• in å†…ç½®æ–¹æ³•) {
          é»˜è®¤ç¯å¢ƒ.è®¾ç½®(æ–¹æ³•, å†…ç½®æ–¹æ³•[æ–¹æ³•])
        }

        document.querySelector('#ast').value = JSON.stringify(è§£æ(ä»¤ç‰Œæµ(è¾“å…¥æµ(è„šæœ¬))), null, '  ')

        æ‰§è¡Œ(è§£æ(ä»¤ç‰Œæµ(è¾“å…¥æµ(è„šæœ¬))), é»˜è®¤ç¯å¢ƒ)
      }

      window.onerror = function (msg) {
        alert(msg)
        return true
      }
    </script>

  </body>

</html>